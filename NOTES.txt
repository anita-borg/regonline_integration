My API key is:
9mIRFe399oIBM0fnX5jxLtupSZlaizGgtHUEuDpUi34QWs66G6LxFDZ6wsdpgzCw

API docs at:
http://developer.regonline.com/

==

discount_codes - array of discount_code discts.

A discount_code dict is:

{ 
  ID : uuid for this code,
  SponsorID : ...,
  RegTypeID : ...,
  RegistrationType : ..., (of sponsor)
  created_date : ..., (sponsor add date for default codes, time of generation for others)
  code_source : ..., (sponsor registrationtype, or "show management" or a provided argument for custom code sources)
  quantity : ...,
  discount_code : ...,
  regonline_str : '-10%',
  badge_type : key to list of badge types, notably here the badge type determines whether or not we reserve a spot
}

==

from suds.client import Client
import logging
import logging.handlers
logging.basicConfig( level=logging.INFO )
consolelog = logging.StreamHandler()
consolelog.setLevel( logging.DEBUG )
log.addHandler( consolelog )

regonline_api_key = '9mIRFe399oIBM0fnX5jxLtupSZlaizGgtHUEuDpUi34QWs66G6LxFDZ6wsdpgzCw'
regonline_wsdl = "https://www.regonline.com/api/default.asmx?WSDL"
regonline_soap_namespace = 'http://www.regonline.com/api'
from suds.plugin import MessagePlugin
class LogPlugin(MessagePlugin):
    def sending(self, context):
        print(str(context.envelope))
    def received(self, context):
        print(str(context.reply))
client = Client( regonline_wsdl, plugings=[LogPlugin()] )
token = client.factory.create( "TokenHeader" )
token.APIToken = regonline_api_key
client.set_options( soapheaders=token )
( a, b ) = client.service.GetRegistrationsMerchandiseForEvent( eventID=1639610 )

POST /api/default.asmx/GetRegistrationsMerchandiseForEvent HTTP/1.1
Host: www.regonline.com
Content-Type: application/x-www-form-urlencoded
Content-Length: length

eventID=string&filter=string&orderBy=string


client = Client("http://localhost/wsdl.wsdl", plugins=[LogPlugin()])

0. Make the app key actually secret (e.g. load from file not in source
control).

0. Set up delay on email sending from mandrill.

This costs money: 5 cents for every thousand scheduled, plus 2 cents a
day for every thousand in storage.

To schedule a message, indicate when the message should be sent using the send_at parameter to the messages/send, messages/send-template, or messages/send-raw API calls. If you're using SMTP, you can provide the schedule time in the X-MC-SendAt header. Both SMTP and the API accept a UTC timestamp in YYYY-MM-DD HH:MM:SS format. The message ID returned by the send call can be used to cancel or reschedule the message.

3. Loggly config: new system.

   * Requires a new account, can't log to a different token without
     messing up VIBLIO stuff.

   * Set up more email alerts after we set up domain.

## 

DEBUG: Test multiple admin mail recipients.
DEBUG: Actually send email to sponsor.email.

